<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Helpdesk IDM Kebonrejo v4 — Form</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>Helpdesk IDM Kebonrejo <span class="tag">v4 — Full (Form & Dashboard)</span></h1>
      <p>Form pengisian mandiri berbasis KK. Setelah submit, sistem hitung skor & kategori; data otomatis muncul di dashboard.</p>
      <nav class="topnav"><a href="index.html">Form</a> · <a href="dashboard.html">Dashboard</a></nav>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Form Pengisian Per KK (Mandiri)</h2>
      <form id="idmForm" novalidate>
        <div class="grid-2">
          <label>Dusun
            <input type="text" name="dusun" required placeholder="contoh: Krajan" />
            <span class="err"></span>
          </label>
          <label>RT/RW
            <input type="text" name="rt_rw" required placeholder="contoh: 02/04" />
            <span class="err"></span>
          </label>
        </div>

        <div class="grid-3">
          <label>Nama Kepala Keluarga
            <input type="text" name="nama_kk" required />
            <span class="err"></span>
          </label>
          <label>NIK (opsional)
            <input type="text" name="nik" pattern="\d{16}" placeholder="16 digit" />
            <span class="err"></span>
          </label>
          <label>Jumlah Anggota Keluarga
            <input type="number" name="jml_anggota" min="1" required />
            <span class="err"></span>
          </label>
        </div>

        <div class="grid-3">
          <label>No. HP (opsional)
            <input type="tel" name="hp" />
            <span class="err"></span>
          </label>
          <label>Nama Berkas Foto (opsional)
            <input type="text" name="foto_rumah" placeholder="mis: IMG_1234.jpg" />
            <span class="err"></span>
          </label>
          <label>Tanggal Pendataan
            <input type="date" name="tgl" />
            <span class="err"></span>
          </label>
        </div>

        <fieldset>
          <legend>Lokasi (GPS)</legend>
          <div class="grid-3">
            <label>Latitude
              <input type="text" name="lat" id="lat" readonly />
            </label>
            <label>Longitude
              <input type="text" name="lng" id="lng" readonly />
            </label>
            <label>Akurasi (m)
              <input type="text" name="acc" id="acc" readonly />
            </label>
          </div>
          <div class="row">
            <button type="button" id="btnGPS">Ambil Koordinat</button>
            <small class="muted">Izin lokasi diperlukan. Jika ditolak, isi manual.</small>
          </div>
          <div id="mapWrap"><div id="map"></div></div>
        </fieldset>

        <hr/>

        <h2>Pengisian Indikator (otomatis dihitung)</h2>
        <p class="muted">Isi setiap indikator dalam skala <strong>0–100</strong>. Kosongkan jika tidak relevan.</p>

        <h3>1. Layanan Dasar</h3>
        <div class="grid-4">
          <label>Air minum layak (%)
            <input type="number" name="ld_air" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Sanitasi layak (%)
            <input type="number" name="ld_sanitasi" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Rumah berlistrik (%)
            <input type="number" name="ld_listrik" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Anak 7–18 bersekolah (%)
            <input type="number" name="ld_sekolah" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Kepesertaan JKN (%)
            <input type="number" name="ld_jkn" min="0" max="100" />
            <span class="err"></span>
          </label>
        </div>

        <h3>2. Sosial</h3>
        <div class="grid-4">
          <label>Gotong royong (0–100)
            <input type="number" name="sos_gotong" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Partisipasi Musdes (%)
            <input type="number" name="sos_musdes" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Keamanan lingkungan (0–100)
            <input type="number" name="sos_keamanan" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Aktivitas budaya (0–100)
            <input type="number" name="sos_budaya" min="0" max="100" />
            <span class="err"></span>
          </label>
        </div>

        <h3>3. Ekonomi</h3>
        <div class="grid-4">
          <label>Keragaman usaha (0–100)
            <input type="number" name="eko_keragaman" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Akses pasar (%)
            <input type="number" name="eko_pasar" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Akses lembaga keuangan (%)
            <input type="number" name="eko_keuangan" min="0" max="100" />
            <span class="err"></span>
          </label>
        </div>

        <h3>4. Lingkungan</h3>
        <div class="grid-4">
          <label>Pengelolaan sampah (0–100)
            <input type="number" name="ling_sampah" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Air limbah (0–100)
            <input type="number" name="ling_airlimbah" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>RTH (0–100)
            <input type="number" name="ling_rth" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Kesiapsiagaan bencana (0–100)
            <input type="number" name="ling_kesiap" min="0" max="100" />
            <span class="err"></span>
          </label>
        </div>

        <h3>5. Aksesibilitas</h3>
        <div class="grid-4">
          <label>Akses ke SD (%)
            <input type="number" name="aks_sd" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Akses ke Puskesmas (%)
            <input type="number" name="aks_puskesmas" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Akses ke Pasar (%)
            <input type="number" name="aks_pasar" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Akses ke Kantor Desa (%)
            <input type="number" name="aks_kantor" min="0" max="100" />
            <span class="err"></span>
          </label>
        </div>

        <h3>6. Tata Kelola</h3>
        <div class="grid-4">
          <label>Transparansi APBDes (0–100)
            <input type="number" name="tg_transparansi" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Pelaksanaan Musrenbang (0–100)
            <input type="number" name="tg_musrenbang" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Dokumen RKPDes (0–100)
            <input type="number" name="tg_rkpdes" min="0" max="100" />
            <span class="err"></span>
          </label>
          <label>Perdes aktif (0–100)
            <input type="number" name="tg_perdes" min="0" max="100" />
            <span class="err"></span>
          </label>
        </div>

        <div class="actions">
          <button type="button" id="btnAdd">Submit & Hitung IDM</button>
          <button type="reset" class="secondary">Reset Form</button>
        </div>
      </form>
      <div id="resultBox" class="card" style="margin-top:12px;display:none"></div>
    </section>
  </main>

  <footer class="site-footer"><div class="container"><small>© 2025 Desa Kebon Rejo — Helpdesk IDM Kebonrejo v4</small></div></footer>
</body>
</html>
